<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Browser tests</title>
    <script type="module" src="../pkg/rusty.js"></script>
    <script type="module">
        import init, {serve, jsRequest} from '../pkg/rusty.js';
        async function run() {
            await init();
            let request = jsRequest("GET", "/", "body", "X-Tom: Cool beans; Cache-Control: private, max-age:0");
            let response = await serve(request);
            const jsResponse = {
                status: response.status(),
                body: response.body(),
                headers: response.headers().split("; ").map(string => string.split(": "))
            }
            console.log(jsResponse);
        }

        run();
    </script>
</head>
<body>

</body>
</html>
